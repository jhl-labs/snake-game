import { Meta, Source } from '@storybook/blocks';
import { ExerciseCard } from '../../components/ExerciseCard';
import { Placeholder } from '../../components/Placeholder';

<Meta title="Exercises/Buggy Snake" />

# 실습: Buggy Snake

`exercises/basics/buggy_snake.c` 파일에 의도적으로 삽입된 버그를 찾아 수정합니다.

---

## 파일 위치

`exercises/basics/buggy_snake.c`


---

## 버그 목록

### 레벨 1: 초급

<ExerciseCard
  number={1}
  title="배열 경계 체크 누락"
  difficulty="초급"
  description="snake_grow 함수에서 MAX_SNAKE_LENGTH를 초과할 때의 처리가 없습니다."
  hint="length 증가 전에 MAX_SNAKE_LENGTH와 비교하세요 (line 45)"
/>

<ExerciseCard
  number={2}
  title="벽 충돌 경계 조건 오류"
  difficulty="초급"
  description="is_wall_collision 함수의 경계 체크가 잘못되었습니다."
  hint="x > GRID_WIDTH 대신 x >= GRID_WIDTH를 사용해야 합니다 (line 54)"
/>

<ExerciseCard
  number={3}
  title="메모리 해제 누락"
  difficulty="초급"
  description="get_direction_name 함수에서 할당한 메모리가 해제되지 않습니다."
  hint="main 함수에서 dir_name을 사용 후 free()를 호출하세요 (line 161)"
/>

---

### 레벨 2: 중급

<ExerciseCard
  number={4}
  title="방향 이동 로직 오류"
  difficulty="중급"
  description="snake_move 함수에서 DIRECTION_LEFT의 이동 로직이 잘못되었습니다."
  hint="DIRECTION_LEFT는 x--이어야 하는데 x++로 되어있습니다 (line 87)"
/>

<ExerciseCard
  number={5}
  title="자기 충돌 체크 시작 인덱스 오류"
  difficulty="중급"
  description="is_self_collision 함수에서 머리(index 0)를 자기 자신과 비교합니다."
  hint="반복문을 i = 1부터 시작해야 합니다 (line 104)"
/>

<ExerciseCard
  number={6}
  title="반대 방향 전환 허용"
  difficulty="중급"
  description="snake_set_direction 함수에서 현재 방향의 반대 방향으로 전환이 허용됩니다."
  hint="새 방향이 현재 방향의 반대인지 확인하세요 (line 60-67)"
/>

---

## 실습 방법

### 1. 전체 분석 요청

<Source
  language="text"
  code={`
> exercises/basics/buggy_snake.c 파일의 모든 버그를 찾아줘
`}
/>

### 2. 개별 수정 요청

<Source
  language="text"
  code={`
> buggy_snake.c의 [n번 버그]를 수정해줘
`}
/>

### 3. 검증

<Source
  language="bash"
  code={`
# 수정된 파일로 빌드
gcc -o test_buggy exercises/basics/buggy_snake.c -Iinclude
./test_buggy
`}
/>

---

## 정답 확인

수정된 버전: `exercises/solutions/buggy_snake_fixed.c`

> **주의**: 먼저 직접 해보고, 정답은 막힐 때만 확인하세요!
