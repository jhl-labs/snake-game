import { Meta, Source } from '@storybook/blocks';
import { Placeholder } from '../../../components/Placeholder';
import { ExerciseCard } from '../../../components/ExerciseCard';
import { ChapterNav } from '../../../components/ChapterNav';

<Meta title="Chapters/04. Command 파일 작성/4.3 커스텀 Command 실습" />

# 4.3 커스텀 Command 실습

직접 Command 파일을 만들어보면서 실습합니다.

---

## 실습 4-1: 새로운 Cursor Command 생성

Agent에게 요청하여 새 Command를 만들어봅니다.

### 요청

<Source
  language="text"
  code={`
# Cursor Chat에서

메모리 누수를 체크하는 command 파일을 만들어줘.
Dr. Memory를 사용하고, bin/snake.exe를 분석해야 해.
파일 위치는 .cursor/commands/memory-check.md
`}
/>

### 예상 결과

<Source
  language="markdown"
  code={`
---
name: 메모리 누수 검사
command: drmemory.exe -logdir ./logs -- ./bin/snake.exe
description: Dr. Memory로 메모리 누수를 검사합니다.
cwd: \${workspaceFolder}
---
`}
/>

---

## 실습 4-2: Claude Code 커스텀 커맨드 생성

Claude Code용 커스텀 커맨드를 만들어봅니다.

### 요청

<Source
  language="text"
  code={`
# Claude Code에서

코드 리뷰를 위한 슬래시 커맨드를 만들어줘.
.claude/commands/review.md 파일로 만들고,
현재 변경된 파일들의 코드 품질을 분석해주는 기능이야.
`}
/>

### 예상 결과

<Source
  language="markdown"
  code={`
---
name: review
description: 현재 변경된 코드를 리뷰합니다
---

## 코드 리뷰 요청

현재 작업 디렉토리에서 변경된 파일들을 분석해주세요.

### 확인 사항

1. **코딩 스타일**: 프로젝트 규칙 준수 여부
2. **버그 가능성**: 잠재적 버그나 에러
3. **성능**: 비효율적인 코드
4. **보안**: 보안 취약점

### 실행 방법

\`git diff\`로 변경 사항 확인 후 분석해주세요.
`}
/>


---

## 실습 4-3: 복합 Command 만들기

여러 작업을 조합한 Command를 만들어봅니다.

<ExerciseCard
  number={1}
  title="full-check.md 생성"
  difficulty="중급"
  description="빌드 → 테스트 → 코드 분석을 순차 실행하는 Command"
  hint="&& 연산자로 명령어를 연결하세요"
/>

<Source
  language="markdown"
  code={`
---
name: 전체 검사
command: mingw32-make && mingw32-make test && cppcheck --enable=all src/
description: 빌드, 테스트, 정적 분석을 모두 실행합니다.
cwd: \${workspaceFolder}
---
`}
/>

<ExerciseCard
  number={2}
  title="release-build.md 생성"
  difficulty="중급"
  description="릴리스 빌드를 위한 최적화 빌드 Command"
  hint="RELEASE=1 플래그를 사용하세요"
/>

<ExerciseCard
  number={3}
  title="format-and-build.md 생성"
  difficulty="초급"
  description="코드 포맷팅 후 빌드하는 Command"
  hint="clang-format과 make를 조합하세요"
/>

---

## 유용한 Command 아이디어

### 개발용

| Command | 설명 |
|---------|------|
| `watch-build` | 파일 변경 감지 후 자동 빌드 |
| `debug-run` | 디버거 연결하여 실행 |
| `profile` | 성능 프로파일링 |

### 품질 관리용

| Command | 설명 |
|---------|------|
| `lint` | 코드 스타일 검사 |
| `security-check` | 보안 취약점 스캔 |
| `coverage` | 테스트 커버리지 측정 |

### 문서화용

| Command | 설명 |
|---------|------|
| `gen-docs` | API 문서 생성 |
| `update-readme` | README 업데이트 |
| `changelog` | 변경 로그 생성 |

---

## Command 작성 팁

### 1. 설명을 명확하게

<Source
  language="markdown"
  code={`
# 나쁜 예
description: 빌드

# 좋은 예
description: MinGW로 프로젝트를 빌드합니다. 결과물은 bin/ 폴더에 생성됩니다.
`}
/>

### 2. 에러 처리 포함

<Source
  language="markdown"
  code={`
command: mingw32-make || echo "빌드 실패. Makefile을 확인하세요."
`}
/>

### 3. 환경 변수 활용

<Source
  language="markdown"
  code={`
command: mingw32-make CC=\${CC:-gcc} CFLAGS="\${CFLAGS:--O2}"
`}
/>

---

## 핵심 정리

<div style={{
  backgroundColor: '#fef3c7',
  padding: '1rem',
  borderRadius: '8px',
  marginTop: '1.5rem'
}}>

1. **Agent에게 요청**하여 Command 생성 가능
2. `&&`로 **여러 명령어 조합**
3. **description**을 명확하게 작성
4. 자주 쓰는 작업은 **Command로 정의**하여 효율화

</div>

<ChapterNav
  prevLink="?path=/docs/chapters-04-command-파일-작성-4-2-claude-code-슬래시-커맨드--docs"
  prevTitle="4.2 Claude Code 슬래시 커맨드"
  nextLink="?path=/docs/chapters-05-claude-md-및-agent-md-5-1-claude-md-구조--docs"
  nextTitle="5.1 CLAUDE.md 구조"
/>
