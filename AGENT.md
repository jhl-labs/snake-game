# Agent Instructions

> AI Agent(Cursor, Claude Code)가 이 프로젝트에서 따라야 할 행동 지침입니다.

## General Principles

### 1. 코드 수정 전 필수 사항
- **반드시 관련 파일을 먼저 읽을 것**
- 기존 코드 스타일과 패턴을 파악할 것
- 변경의 영향 범위를 이해할 것

### 2. 최소 변경 원칙
- 요청된 작업만 수행
- 불필요한 리팩토링 금지
- 관련 없는 코드 수정 금지

### 3. 일관성 유지
- 기존 네이밍 규칙 따르기
- 기존 코드 구조 유지
- 기존 주석 스타일 유지

---

## Workflow Guidelines

### 버그 수정 시
```
1. 문제 파악
   - 버그 증상 확인
   - 관련 파일 읽기
   - 원인 분석

2. 수정 계획
   - 최소한의 변경으로 해결 방안 수립
   - 부작용 검토

3. 수정 및 검증
   - 코드 수정
   - 빌드 확인
   - 테스트 실행 (가능한 경우)
```

### 기능 추가 시
```
1. 요구사항 분석
   - 기존 코드 구조 파악
   - 적절한 위치 결정

2. 구현
   - 기존 패턴 따르기
   - 작은 단위로 구현

3. 검증
   - 빌드 확인
   - 기존 기능 영향 확인
```

### 코드 리뷰 시
```
1. 스타일 검사
   - 네이밍 규칙 준수
   - 코드 포맷팅

2. 품질 검사
   - NULL 체크 여부
   - 메모리 관리
   - 에러 처리

3. 아키텍처 검사
   - 계층 분리 준수
   - 의존성 방향
```

---

## Prohibited Actions

### 절대 하지 말 것
- [ ] 테스트 없이 대규모 리팩토링
- [ ] 관련 없는 파일 수정
- [ ] 기존 동작 변경 (요청 없이)
- [ ] 주석 없이 복잡한 로직 추가
- [ ] raylib을 Model/Logic 계층에서 사용

### 사용자 확인 필요
- [ ] 아키텍처 변경
- [ ] 새로운 의존성 추가
- [ ] 기존 API 변경
- [ ] 파일 삭제

---

## Preferred Approaches

### 코드 작성
- 간결하고 명확한 코드 선호
- 의미 있는 변수명 사용
- 작은 함수로 분리
- 명시적인 에러 처리

### 주석 작성
- 공개 함수에 Doxygen 스타일 주석
- 복잡한 로직에만 설명 주석
- TODO 주석은 명확하게

### 커밋
- 작은 단위의 논리적 커밋
- 명확한 커밋 메시지
- 관련 변경사항 그룹핑

---

## Project-Specific Rules

### 이 프로젝트에서의 특별 지침

1. **raylib 의존성 관리**
   - `renderer.c`와 `main.c`에서만 raylib 사용
   - `snake.c`, `food.c`, `game.c`는 raylib 의존성 없음

2. **메모리 관리**
   - 현재 동적 할당 최소화됨
   - 배열 기반 Snake 구현 사용 중
   - 향후 동적 할당 시 반드시 해제 코드 포함

3. **상태 관리**
   - `GameState` enum으로 게임 상태 관리
   - 상태 전이는 `game.c`에서만 처리

4. **좌표 시스템**
   - 그리드 기반 좌표 사용
   - 픽셀 변환은 `renderer.c`에서 처리

---

## Response Format

### 코드 수정 시
```
변경 파일: src/snake.c
변경 내용: snake_move 함수 수정
변경 이유: 벽 충돌 감지 버그 수정

[코드 변경 내용]

빌드 확인: make
테스트: (해당 사항 있으면)
```

### 분석 요청 시
```
분석 대상: [파일/함수명]
발견 사항:
  1. ...
  2. ...
권장 조치:
  1. ...
  2. ...
```

---

## Quick Reference

### 자주 사용하는 명령어
| 작업 | 명령어 |
|------|--------|
| 빌드 | `make` |
| 정리 | `make clean` |
| 실행 | `./bin/snake.exe` |
| 구문검사 | `gcc -fsyntax-only -Iinclude src/*.c` |

### 핵심 파일
| 파일 | 역할 |
|------|------|
| `game.c` | 게임 로직 중심 |
| `snake.c` | 뱀 모델 |
| `renderer.c` | 화면 렌더링 |
| `main.c` | 입력 처리, 게임 루프 |

---

*이 문서는 AI Agent의 효과적인 작업을 위한 가이드입니다.*
